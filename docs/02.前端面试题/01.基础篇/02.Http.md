---
title: Http
date: 2022-05-29 20:58:30
permalink: /pages/78c1f6/
---

## Http 是什么？

通俗来讲，他就是计算机通过网络进行通信的规则，是一个基于请求与响应，无状态的，应用层的协议，常基于 `TCP/IP `协议传输数据。目前任何终端（手机，笔记本电脑。。）之间进行任何一种通信都必须按照 `Http` 协议进行，否则无法连接。

## HTTP 常见的请求方法有哪些？

| 方法    | 描述                                   | 是否包含主体 |
| ------- | -------------------------------------- | ------------ |
| GET     | 从服务端获取指定信息                   | 否           |
| POST    | 向服务端发送待处理数据                 | 是           |
| HEAD    | 从服务器获取指定信息头部               | 否           |
| PUT     | 向服务器发送数据并替换服务器上指定数据 | 是           |
| OPTIONS | 查询针对请求 URL 指定的资源支持        | 否           |
| DELETE  | 从服务器删除指定数据                   | 否           |
| TRACE   | 沿着目标资源路径执行信息环回测试       | 否           |

## GET 方法与 POST 方法的区别？

区别一：
`get` 重点在从服务器上获取资源，`post` 重点在向服务器发送数据；
区别二：
`get` 传输数据是通过 `URL` 请求，以 `field（字段）`= `value` 的形式，置于 `URL` 后，并用"?"连接，多个请求数据间用"&"连接，如`http://127.0.0.1/Test/login.action?name=admin&password=admin`，这个过程用户是可见的；
`post` 传输数据通过 Http 的 post 机制，将字段与对应值封存在请求实体中发送给服务器，这个过程对用户是不可见的；
区别三：
Get 传输的数据量小，因为受 `URL` 长度限制，但效率较高；
`Post` 可以传输大量数据，所以上传文件时只能用 `Post` 方式；
区别四：
`get` 是不安全的，因为 `URL` 是可见的，可能会泄露私密信息，如密码等；
`post` 较 `get` 安全性较高；
区别五：
`get` 方式只能支持 `ASCII` 字符，向服务器传的中文字符可能会乱码。
`post` 支持标准字符集，可以正确传递中文字符。

## PUT 和 PATCH 都可以向服务器更新资源，有什么区别？

`PATCH` 是对 `PUT` 的补充。`PUT` 是更新整条记录，对重复字段也进行覆盖。`PATCH` 对资源进行“局部更新”。

## PUT 和 POST 都可以给服务器新增资源，有什么区别？

`PUT`：幂等，URI 指向单一资源。
`POST`：非幂等，URI 指向资源集合。

> eg：比如博客系统，创建新文章，用 POST https://www.blog.com/articles,多次调用，就创建多个文章。如果更新指定文章的标题，用PUT https://www.blog.com/articles/000001,多次调用，和第一次调用效果相同。

## 常见的 HTTP 相应状态码?

`1xx`：指示信息--表示请求已接收，继续处理
`2xx`：成功--表示请求已被成功接收、理解、接受
`3xx`：重定向--要完成请求必须进行更进一步的操作
`4xx`：客户端错误--请求有语法错误或请求无法实现
`5xx`：服务器端错误--服务器未能实现合法的请求

---

`200`：请求被正常处理
`204`：请求被受理但没有资源可以返回
`206`：客户端只是请求资源的一部分，服务器只对请求的部分资源执行 `GET` 方法，相应报文中通过 `Content-Range` 指定范围的资源。
`301`：永久性重定向
`302`：临时重定向
`303`：与 `302` 状态码有相似功能，只是它希望客户端在请求一个 URI 的时候，能通过 `GET` 方法重定向到另一个 `URI` 上
`304`：发送附带条件的请求时，条件不满足时返回，与重定向无关
`307`：临时重定向，与 `302` 类似，只是强制要求使用 `POST` 方法
`400`：请求报文语法有误，服务器无法识别
`401`：请求需要认证
`403`：请求的对应资源禁止被访问
`404`：服务器无法找到对应资源
`500`：服务器内部错误
`503`：服务器正忙

## 常见 HTTP 首部字段

## HTTP 的缺点与 HTTPS

- 通信使用明文不加密，内容可能被窃听
- 不验证通信方身份，可能遭到伪装
- 无法验证报文完整性，可能被篡改

`HTTPS` 就是 `HTTP` 加上加密处理（一般是 `SSL` 安全通信线路）+认证+完整性保护

## Http 协议有哪些特征?

- 支持客户/服务器模式；
- 简单快速；
- 灵活；
- 无连接；
- 无状态；

## HTTP 协议中 HTTP1.0 和 1.1 有什么区别

在 HTTP1.0 中，当连接建立后，客户端发送一个请求，服务器端返回一个信息后就关闭了连接。当浏览器下次要请求是又要重新建立连接，显然这种不断建立连接的方式会造成很多问题。
在 HTTP1.1 中，引入了持续连接的概念，通过这种连接浏览器建立一个连接之后，发送请求并得到返回消息，然后继续发送请求再次得到返回消息，也就是说客户端可以连续发送多个请求，而不用等待每一个响应的到来。

## Http 优化

利用负载均衡优化和加速 HTTP 应用

利用 HTTP Cache 来优化网站

## HTTP 的 keep-alive 是干什么的？

早期`HTTP/1.0`每次请求都要重新建立一次连接，为了减少资源消耗、缩短响应时间，就要重用连接，想要保持长连接，需要在请求头上加上`Connection:keep-alive`。

## HTTPS 的加密通信是怎么样的？

HTTPS 使用了两种加密，对称加密和非对称加密。

对称加密：通讯双方使用同一密钥。性能好，但不安全。
非对称加密：通讯双方各有一个私钥，共享一个公钥。安全，但性能差。
解决方案（混合加密）： 将对称加密的密钥通过非对称加密的公钥进行加密，并发送出去,通信双方在通过各自的私钥进行解密获得对称加密的密钥，然后双方就可以使用对称加密来沟通。

混合加密+数字证书保证安全性：

服务器把自己的公钥登录到 CA（数字证书认证机构）。
CA 用自己的私钥部署数字签名并颁发公钥证书。
公钥证书=服务器的公开密钥+CA 的数字签名。

客户端拿到服务器的公钥证书后，用 CA 公钥进行验证真实性。
CA 的公钥，已经事先写进浏览器了。

客户端使用服务器公钥加密报文。
服务器使用自己的私钥进行解密。

## DNS 域名解析

DNS 系统是将域名解析为一个 IP 地址或者另一个域名 CNAME。当请求方拿到 ip 地址之后，对服务器进行真正的请求调用。

DNS 查询过程：

- 浏览器是否有缓存
- 操作系统是否有缓存
- 本地 Hosts 文件是否有缓存
- 本地 DNS 服务器是否有缓存
- 向根域名服务器查询，若知道对应 IP 则返回 IP，不知道则告诉本地 DNS 服务器要去哪个顶级域名服务器查询
- 迭代，直到找到对应的 ip
  值得一提的是，CNAME 是是实现 CDN 内容分发的关键。（引导面试官提问 CDN）

## 强缓存和协商缓存？

强缓存`(Cache-Control)`：只有首次请求和服务器通信，读取缓存不用发送请求。返回 `200`

如果资源没过期，则直接从缓存读取（强制缓存），此时在 `Network` 一栏可以看到资源对应的状态码为 `200`（from disk cache）或者是 `200` （from memory cache）
比如，资源没过期的时候我们打开新的页面，资源会从硬盘缓存中读取（`from disk cache`）；如果我们此时又刷新页面，资源会从内存缓存中读取（from memory cache）

协商缓存(`ETag/If-None-Match`)：总会与服务器交互，第一次是拿数据和 `ETag`，之后凭 `ETag` 询问是否更新。返回 `304`

## CDN（内容分发网络）

网络传输是依赖于网线的，请求双方距离越长，延迟就越久。 `CDN` 内容分发网络，可以做到尽可能地缩短地域距离。`CDN` 提供商在世界各地部署了大量的静态资源服务器，开发者将自己的静态资源传给 `CDN` 服务，这些静态资源将自动的分布到世界各地去。当客户端请求域名时，域名首先会被 `DNS` 解析成“`CDN` 专用域名”（在阿里云服务中被叫做“加速域名”），然后 `CDN` 专用 `DNS` 服务器会解析加速域名，根据服务器上记录的所有 `CDN` 服务器地址，选出一个离用户最近的 CDN 服务器地址并返回给用户，用户即可以访问离自己最近的一台 `CDN` 服务器了。

用户的地理地址，是根据用户的 `ip` 进行判断，类似于“北京移动”、“上海电信”这种。在 `CDN` 服务商中有一套标准的“`IP` 字典”，方便对应用户的地理地址。
[参考文章](https://juejin.cn/post/6844903890706661389)

## CDN 上如果提交了新资源怎么更新？

对于实时性要求不高的资源，我们初始化时在 `CDN` 控制台上自定义文件或目录的缓存策略，比如 `img` 文件的缓存时间等等，根据不同的缓存策略采用不同的更新方案。

如果对于实时性要求比较高的资源，可以将缓存时间设为 `0`，在更新资源后，可以根据我们需要在 `CDN` 控制台中开启缓存刷新或缓存预热。

刷新：`CDN` 节点缓存内容强制过期，当向 `CDN` 节点请求资源时，会从源站获取资源并将其缓存。

预热：源站主动将对应资源缓存到 `CDN` 节点，首次请求时，就你那个直接从 `CDN` 节点缓存中获取最新资源。
